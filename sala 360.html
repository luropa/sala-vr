<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Sala de Estudo com Teclado Virtual e Movimento por Gaze</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <script>
    AFRAME.registerComponent('interacao-lousa', {
      init: function () {
        const teclado = document.querySelector('#teclado');
        const textoDigitado = document.querySelector('#texto-digitado');

        this.el.addEventListener('mouseenter', () => {
          this.timeout = setTimeout(() => {
            criarTeclado();
            teclado.setAttribute('visible', true);
            textoDigitado.setAttribute('visible', true);
          }, 2000);
        });

        this.el.addEventListener('mouseleave', () => {
          clearTimeout(this.timeout);
        });
      }
    });
  </script>
</head>
<body>
  <a-scene>
    <a-assets>
      <a-asset-item id="modeloCadeira" src="cadeira_final.glb"></a-asset-item>
      <img id="img-ninho" src="palavraninho.png" />
      <img id="img-estrela" src="estrelacontente.png" />
      <img id="img-estrela-triste" src="estrelatriste.png" />
      <img id="jogo" src="jogo-da-velha-feltro2.png" />
    </a-assets>

    <a-light type="ambient" color="#ffffff" intensity="1.2"></a-light>

    <a-plane src="piso1.png" width="10" height="10" rotation="-90 0 0" class="piso" material="shader: flat;"></a-plane>
    <a-plane color="#a9c9dd" width="10" height="10" position="0 5 0" rotation="90 0 0"></a-plane>

    <a-image src="sol.png" width="2" height="2" position="0 4.95 0" rotation="-90 0 180"></a-image>

    <a-plane width="10" height="5" position="0 2.5 -5" rotation="0 0 0" material="src: paredeerodape2.png; side: front;"></a-plane>
    <a-plane width="10" height="5" position="0 2.5 5" rotation="0 180 0" material="src: paredeerodape2.png; side: front;"></a-plane>
    <a-plane width="10" height="5" position="-5 2.5 0" rotation="0 90 0" material="src: paredeerodape2.png; side: front;"></a-plane>
    <a-plane width="10" height="5" position="5 2.5 0" rotation="0 -90 0" material="src: paredeerodape2.png; side: front;"></a-plane>

    <a-image src="porta.png" width="2" height="4" position="0 1.9 4.95" rotation="0 180 0"></a-image>

    <a-image
      id="lousa"
      interacao-lousa
      src="lousaembranco2.png"
      width="5.6"
      height="3.1"
      position="0 2.5 -4.95"
      gaze-activate-move
    ></a-image>

    <a-image
      id="imagem-ninho"
      src="#img-ninho"
      width="1"
      height="0.5"
      position="0 3 -4.9"
      visible="false"
    ></a-image>

    <a-text
      id="texto-digitado"
      value=""
      position="0 2.5 -4.9"
      color="#000"
      align="center"
      width="3"
      visible="false"
    ></a-text>

    <a-entity id="teclado" visible="false"></a-entity>

    <a-image src="tapete.png" width="5" height="7" rotation="-90 0 0" position="-3 0.01 1"></a-image>
    <a-image src="ponteirotwister.png" width="0.9" height="0.9" rotation="-90 0 0" position="-1.2 0.02 2"></a-image>
    <a-image src="tatame.png" width="4" height="4" rotation="-90 0 0" position="2.7 0.01 1"></a-image>
    <a-image src="quebra-cabeca.png" width="1.4" height="1.8" rotation="-90 10 0" position="1.55 0.02 2"></a-image>
    <a-image src="janela2.png" width="5.5" height="5.5" position="-4.95 2.5 0" rotation="0 90 0"></a-image>

    <a-image
      id="jogoDaVelha"
      src="#jogo"
      width="1.5"
      height="1.5"
      position="2.8 2 4.95"
      rotation="0 180 0"
    ></a-image>

    <a-image src="interruptor-branco.png" width="0.3" height="0.3" position="-1.5 2 4.94" rotation="0 180 0"></a-image>
    <a-image src="relogio2.png" width="0.8" height="0.8" position="3.5 2.5 -4.95"></a-image>
    <a-image src="nuvem2.png" width="2" height="1.7" position="3.5 3.5 -4.95"></a-image>
    <a-image src="nuvem2.png" width="2" height="1.7" position="-3.5 3.5 -4.95"></a-image>

    <a-entity
      id="cadeira"
      gltf-model="#modeloCadeira"
      position="3 0 -3"
      scale="0.8 0.8 0.8"
      static-body
    ></a-entity>

    <!-- Pegadas adicionadas -->
    <a-image src="pegadas.png" width="0.8" height="0.8" rotation="-90 180 0" position="2.7 0.01 4"></a-image>
    <a-image src="pegadas.png" width="0.8" height="0.8" rotation="-90 180 0" position="0 0.01 4"></a-image>
    <a-image src="pegadas.png" width="0.8" height="0.8" rotation="-90 0 0" position="0 0.01 -1.5"></a-image>
    <a-image src="pegadas.png" width="0.8" height="0.8" rotation="-90 -90 0" position="4.2 0.01 -2"></a-image>
    <a-image src="pegadas.png" width="0.8" height="0.8" rotation="-90 180 0" position="-3 0.05 4"></a-image>
    <a-image src="pegadas.png" width="0.8" height="0.8" rotation="-90 90 0" position="0 0.01 0.5"></a-image>

    <a-entity id="cameraRig" position="0 0.5 0">
      <a-camera look-controls wasd-controls-enabled="true">
        <a-cursor
          fuse="true"
          fuse-timeout="2000"
          color="red"
          geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
          material="color: red; shader: flat"
          position="0 0 -1"
        ></a-cursor>
      </a-camera>
    </a-entity>

    <a-entity id="teleportRig" position="0 0 0">
      <a-entity laser-controls="hand: right"></a-entity>
      <a-entity teleport-controls="cameraRig: #cameraRig; button: trigger; collisionEntities: .piso;"></a-entity>
    </a-entity>
  </a-scene>
</body>
</html>
