<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Sala de Estudo com Jogo da Velha</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body>
  <a-scene>
    <!-- Câmera na altura de uma criança (1 metro) -->
    <a-entity id="cameraRig" position="0 1 4.5">
      <a-camera id="camera" wasd-controls-enabled="false"></a-camera>
    </a-entity>

    <!-- Sala -->
    <a-box position="0 0.5 -5" width="10" height="1" depth="10" color="#ccc"></a-box>
    <a-box position="0 3.5 -10" width="10" height="6" depth="0.1" color="#f0f0f0"></a-box> <!-- parede do fundo -->
    <a-box position="0 3.5 0" width="10" height="6" depth="0.1" rotation="0 180 0" color="#e0e0e0"></a-box> <!-- parede oposta -->
    <a-box position="-5 3.5 -5" width="0.1" height="6" depth="10" color="#e0e0e0"></a-box> <!-- esquerda -->
    <a-box position="5 3.5 -5" width="0.1" height="6" depth="10" color="#e0e0e0"></a-box> <!-- direita -->
    <a-box position="0 6.5 -5" width="10" height="1" depth="10" color="#ccc"></a-box> <!-- teto -->

    <!-- Porta (na parede do fundo) -->
    <a-box position="0 1.5 -10.05" width="2" height="3" depth="0.1" color="#8B4513"></a-box>

    <!-- Jogo da velha (imagem na parede do fundo, à direita da porta) -->
    <a-image id="jogo" src="#imgJogo" position="2.5 1 -9.95" width="1.5" height="1.5" look-at="#camera" class="gaze-target"></a-image>
    <a-assets>
      <img id="imgJogo" src="jogo-da-velha-feltro2.png">
    </a-assets>

    <!-- Gaze-trigger para mover até o jogo -->
    <a-entity id="gaze-listener"
              geometry="primitive: plane; height: 1.5; width: 1.5"
              material="color: transparent; opacity: 0"
              position="2.5 1 -9.94"
              class="gaze-target"
              gaze-listener>
    </a-entity>

    <script>
      AFRAME.registerComponent('gaze-listener', {
        init: function () {
          let el = this.el;
          let timer;
          el.addEventListener('mouseenter', function () {
            timer = setTimeout(() => {
              // Mover a câmera automaticamente a 2m da imagem do jogo
              const rig = document.querySelector('#cameraRig');
              rig.setAttribute('animation__move', {
                property: 'position',
                to: '2.5 1 -7.95', // 2m de distância da parede do jogo, altura 1m
                dur: 1500,
                easing: 'easeInOutQuad'
              });
            }, 2000); // 2 segundos de olhar fixo
          });
          el.addEventListener('mouseleave', function () {
            clearTimeout(timer);
          });
        }
      });
    </script>
  </a-scene>
</body>
</html>
