<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Sala com Gaze e Movimento Contínuo</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
  <script>
    AFRAME.registerComponent('gaze-move', {
      schema: {
        speed: { type: 'number', default: 1.5 }
      },
      init: function () {
        this.direction = new THREE.Vector3();
      },
      tick: function (time, deltaTime) {
        const camera = this.el.sceneEl.camera;
        const rig = this.el;
        const d = this.data.speed * (deltaTime / 1000);

        camera.getWorldDirection(this.direction);
        this.direction.y = 0; // Impede que suba/abaixe
        this.direction.normalize();

        rig.object3D.position.add(this.direction.multiplyScalar(d));
      }
    });
  </script>
</head>

<body>
  <a-scene>
    <!-- Chão -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#7BC8A4"></a-plane>

    <!-- Rig com movimento por olhar -->
    <a-entity id="rig" position="0 1.6 0" gaze-move>
      <a-camera look-controls>
        <a-cursor 
          fuse="true" 
          fuse-timeout="500" 
          color="red"
          geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
          material="color: red; shader: flat"
          position="0 0 -1">
        </a-cursor>
      </a-camera>
    </a-entity>

    <!-- Luzes -->
    <a-entity light="type: ambient; color: #ccc"></a-entity>
    <a-entity light="type: directional; color: #fff; intensity: 0.7" position="0 10 5"></a-entity>
  </a-scene>
</body>
</html>
